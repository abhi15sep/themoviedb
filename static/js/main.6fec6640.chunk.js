(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{109:function(e,t,n){e.exports=n(283)},114:function(e,t,n){},186:function(e,t,n){},190:function(e,t,n){},270:function(e,t,n){},272:function(e,t,n){},275:function(e,t,n){},279:function(e,t,n){},281:function(e,t,n){},283:function(e,t,n){"use strict";n.r(t);var a={};n.r(a),n.d(a,"movieDetails",function(){return g}),n.d(a,"movieList",function(){return O});var r=n(0),c=n.n(r),i=n(22),o=n.n(i),s=(n(114),n(23)),u=n(43),l=n(19),m=n(285),p=n(286),v=n(16),h=n(21),f=n(27),d=n(105),E={currentMovieId:null,details:{},isFetching:!0},g=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:E,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FETCH_MOVIE_DETAILS_REQUEST":return Object(h.a)({},e,{isFetching:!0});case"FETCH_MOVIE_DETAILS_SUCCESS":return Object(h.a)({},e,{isFetching:!1,currentMovieId:t.currentMovieId,details:t.details});default:return e}},b=n(69),_={hasMore:!0,isFetching:!1,movies:[],genres:null},O=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FETCH_MOVIES_REQUEST":return Object(h.a)({},e,{isFetching:!0});case"FETCH_MOVIES_SUCCESS":return Object(h.a)({},e,{isFetching:!1,hasMore:t.hasMore,movies:Object(b.a)(e.movies).concat(Object(b.a)(t.newMovies))});case s.LOCATION_CHANGE:return Object(h.a)({},e,{hasMore:!0,movies:[]});case"FETCH_GENRES_REQUEST":return Object(h.a)({},e);case"FETCH_GENRES_SUCCESS":return Object(h.a)({},e,{genres:t.genres});default:return e}},j=function(e){var t=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||f.d;return Object(f.e)(Object(f.c)(Object(h.a)({router:Object(s.connectRouter)(e)},a)),t(Object(f.a)(Object(s.routerMiddleware)(e),d.a)))},S=Object(u.createMuiTheme)({palette:{primary:{light:"#a6bfcc",main:"#778f9b",dark:"#4a626d",contrastText:"#263238"},secondary:{light:"#be9c91",main:"#8d6e63",dark:"#5f4339",contrastText:"#efebe9"}}}),y=(n(186),function(){return c.a.createElement("div",{className:"favourites"},c.a.createElement("h3",null,"Favourites"))}),M=function(e){return e.router.location.pathname},w=n(284),C=n(20),T=n.n(C),I=n(26),F=n(106),N=n.n(F),k=function(e,t){return fetch(e,t).then(function(e){return e.ok?e.json():Promise.reject(e.text())},function(e){return Promise.reject(e)}).then(function(e){return{json:N()(e)}},function(e){return{error:e}}).catch(function(e){return{error:e}})},x=function(e){return"".concat("//api.themoviedb.org/3").concat(e).concat(-1===e.indexOf("?")?"?":"&","api_key=").concat("da9a74c438c0aec2e101b15f0c154ec4")},D=x("/genre/movie/list"),L=x("/movie/:movieId"),R=x("/movie/popular?page=:page"),H=x("/search/movie?page=:page&query=:query"),P=n(53),U=new P.b.Entity("genres");U.define({genres:[U]});var V=U,A=function(e){return{type:"FETCH_MOVIES_SUCCESS",hasMore:e.page<e.totalPages,newMovies:e.results}},G=n(35),Q=n(36),q=n(38),B=n(37),$=n(39),J=n(107),W=n.n(J),X=(n(190),function(e){function t(){var e,n;Object(G.a)(this,t);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(n=Object(q.a)(this,(e=Object(B.a)(t)).call.apply(e,[this].concat(r)))).onSubmit=function(e){e.preventDefault();var t=e.target.search.value;(0,n.props.searchMovies)(t)},n}return Object($.a)(t,e),Object(Q.a)(t,[{key:"render",value:function(){return c.a.createElement("form",{onSubmit:this.onSubmit,className:"search"},c.a.createElement(W.a,{id:"search",label:"Search movies",type:"search",className:"search__input",autoComplete:"off"}))}}]),t}(r.Component)),z=Object(l.connect)(null,function(e){return{searchMovies:function(t){return e(function(e){return function(t,n){var a=M(n()),r="/search/".concat(e);a!==r&&t(Object(s.push)(r))}}(t))}}})(function(e){return c.a.createElement(X,e)}),K=(n(270),function(e){return e.preventDefault()}),Y=function(e){var t=e.subheading,n=e.currentPathName;return c.a.createElement("header",{className:"header"},c.a.createElement("h2",{className:"header__heading"},c.a.createElement(w.a,{to:"/popular",onClick:"/popular"===n?K:null},"themoviedb-app")," ","/ ",t),c.a.createElement(z,null))},Z=function(e){var t=M(e);switch(!0){case/^\/popular$/.test(t):return"popular films";case/^\/movie/.test(t):return"movie details / ".concat(function(e){return e.movieDetails.details.originalTitle}(e));case/^\/search/.test(t):return"search / '".concat(t.slice(8),"'");default:return""}},ee=Object(l.connect)(function(e){return{subheading:Z(e),currentPathName:M(e)}})(function(e){return c.a.createElement(Y,e)}),te=function(e){return{type:"FETCH_MOVIE_DETAILS_SUCCESS",currentMovieId:e.id,details:e}},ne=(n(272),function(e){function t(){return Object(G.a)(this,t),Object(q.a)(this,Object(B.a)(t).apply(this,arguments))}return Object($.a)(t,e),Object(Q.a)(t,[{key:"componentDidMount",value:function(){(0,this.props.fetchMovieDetails)()}},{key:"render",value:function(){var e=this.props,t=e.details,n=e.isFetching;return c.a.createElement("section",{className:"section movie-details__section"},n?c.a.createElement("div",{className:"loader"},"Loading ..."):c.a.createElement(r.Fragment,null,c.a.createElement("img",{className:"movie-details__poster",src:"".concat("//image.tmdb.org/t/p","/w780").concat(t.posterPath),alt:"".concat(t.title," poster"),width:"390px"}),c.a.createElement("article",{className:"movie-details__article"},c.a.createElement("h2",{className:"movie-details__title"},t.title),c.a.createElement("p",{className:"movie-details__budget"},"Budget: $",t.budget),c.a.createElement("p",{className:"movie-details__popularity"},"Popularity: ",t.popularity),c.a.createElement("p",{className:"movie-details__countries"},"Countries:"," ",t.productionCountries.map(function(e){return e.iso31661}).join()),c.a.createElement("p",null,"Release date: ",t.releaseDate),c.a.createElement("h3",null,"Storyline"),c.a.createElement("p",null,t.overview))))}}]),t}(r.Component)),ae=Object(l.connect)(function(e){return{details:e.movieDetails.details,isFetching:e.movieDetails.isFetching}},function(e,t){return{fetchMovieDetails:function(){return e((n=t.match.params.movieId,function(){var e=Object(I.a)(T.a.mark(function e(t){var a,r;return T.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t({type:"FETCH_MOVIE_DETAILS_REQUEST"}),e.next=3,k(L.replace(":movieId",n));case 3:a=e.sent,r=a.json,t(te(r));case 6:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()));var n}}})(function(e){return c.a.createElement(ne,e)}),re=n(108),ce=n.n(re),ie=n(68),oe=n.n(ie),se=(n(275),function(e){var t=e.id,n=e.posterPath,a=e.title,r=e.genres,i=e.genreIds;return c.a.createElement("article",{className:"movieList__movie-card"},c.a.createElement(w.a,{to:"/movies/:movieId".replace(":movieId",t)},c.a.createElement("img",{src:"".concat("//image.tmdb.org/t/p","/w400").concat(n),alt:"".concat(a," poster"),width:"200px"}),c.a.createElement(oe.a,{variant:"subheading",gutterBottom:!0},a),c.a.createElement(oe.a,{variant:"caption",gutterBottom:!0},i.map(function(e){return r[e].name}).join(", "))))}),ue=(n(279),function(e){var t=e.movies,n=e.genres;return c.a.createElement("section",{className:"section movieList__section"},c.a.createElement("div",{className:"movieList__wrapper"},t.map(function(e){var t=e.id,a=e.posterPath,r=e.title,i=e.genreIds;return c.a.createElement(se,{genreIds:i,genres:n,id:t,key:t,posterPath:a,title:r})})))}),le=function(e){function t(){return Object(G.a)(this,t),Object(q.a)(this,Object(B.a)(t).apply(this,arguments))}return Object($.a)(t,e),Object(Q.a)(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.genres,n=e.getGenres;t||n()}},{key:"render",value:function(){var e=this.props,t=e.movies,n=e.loadMovies,a=e.hasMore,r=e.genres,i=e.isFetching,o=e.match;if(!r)return null;var s=c.a.createElement("div",{className:"loader",key:"loader"},"Loading ...");return c.a.createElement(ce.a,{key:o.params.query,hasMore:!i&&a,loader:s,loadMore:n},c.a.createElement(ue,{movies:t,genres:r}))}}]),t}(r.Component);le.defaultProps={genres:null};var me=Object(l.connect)(function(e){return{movies:e.movieList.movies,hasMore:e.movieList.hasMore,isFetching:e.movieList.isFetching,genres:e.movieList.genres}},function(e,t){var n=t.match.params.query;return{loadMovies:n?function(t){return e(function(e,t){return function(){var n=Object(I.a)(T.a.mark(function n(a){var r,c;return T.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return a({type:"FETCH_MOVIES_REQUEST"}),n.next=3,k(H.replace(":page",e).replace(":query",t));case 3:r=n.sent,c=r.json,a(A(c));case 6:case"end":return n.stop()}},n,this)}));return function(e){return n.apply(this,arguments)}}()}(t,n))}:function(t){return e(function(e){return function(){var t=Object(I.a)(T.a.mark(function t(n){var a,r;return T.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n({type:"FETCH_MOVIES_REQUEST"}),t.next=3,k(R.replace(":page",e));case 3:a=t.sent,r=a.json,n(A(r));case 6:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()}(t))},getGenres:function(){return e(function(){var e=Object(I.a)(T.a.mark(function e(t){var n,a,r,c;return T.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t({type:"FETCH_GENRES_REQUEST"}),e.next=3,k(D);case 3:n=e.sent,a=n.json,r=Object(P.a)(a,V),c=r.entities,t({type:"FETCH_GENRES_SUCCESS",genres:c.genres});case 7:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}())}}})(le),pe=(n(281),Object(v.a)()),ve=j(pe),he=function(){return c.a.createElement(u.MuiThemeProvider,{theme:S},c.a.createElement(l.Provider,{store:ve},c.a.createElement(s.ConnectedRouter,{history:pe},c.a.createElement(r.Fragment,null,c.a.createElement(ee,null),c.a.createElement(y,null),c.a.createElement("main",{className:"main"},c.a.createElement(m.a,{exact:!0,path:"/",render:function(){return c.a.createElement(p.a,{to:"/popular"})}}),c.a.createElement(m.a,{exact:!0,path:"/popular",component:me}),c.a.createElement(m.a,{path:"/search/:query",component:me}),c.a.createElement(m.a,{path:"/movies/:movieId",component:ae}))))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(c.a.createElement(he,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[109,2,1]]]);
//# sourceMappingURL=main.6fec6640.chunk.js.map